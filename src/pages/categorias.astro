---
import { supabase } from '../db/supabase.js'
import Layout from '../layouts/Layout.astro'

const event_id = 'dde3a284-d52a-45fe-95c8-5028628536c9' // Reemplaza con el ID del evento que deseas consultar

const { data: categorias, error } = await supabase
	.from('categories_list')
	.select('*')
	.eq('event_id', event_id)

if (error) {
	console.error('Error fetching categories:', error)
} else {
	console.log('Categories:', categorias)
}
---

<Layout
	title="Categorías de Competencia"
	description="Explora las categorías disponibles para competir en nuestro evento."
>
	<section class="max-w-4xl mx-auto p-4">
		<h1 class="text-3xl font-bold mb-6 text-center">
			Categorías de Competencia
		</h1>
		{
			categorias && categorias.length > 0 ? (
				<ul class="space-y-4">
					{categorias.map((categoria) => (
						<li class="border border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow">
							<h2 class="text-xl font-semibold mb-2">
								{categoria.category_name}
							</h2>
							<p class="text-gray-700">{categoria.gender}</p>
						</li>
					))}
				</ul>
			) : (
				<p class="text-center text-gray-500">
					No hay categorías disponibles en este momento.
				</p>
			)
		}
	</section>
</Layout>
